
# 指令总结

---

以下是部分 TH-Union教学机 的指令

|基本指令|用法|功能及相关指令|
|:-:|:-:|:-:|
|ADD|ADD DR,SR|DR+SR→DR|
|SUB|SUB DR,SR|DR-SR→DR|
|AND|AND DR,SR|DR and SR→DR|
|OR|OR DR,SR|DR or SR→DR|
|XOR|XOR DR,SR|DR xor SR→DR|
|CMP|CMP DR,SR|DR-SR ( 影响标志位 )|
|TEST|TEST DR,SR|DR and SR ( 影响标志位 )|
|MVRR|MVRR DR,SR|DR ← SR|
|INC DEC|INC DR;DEC DR|DR+1→DR; DR-1→DR|
|SHL / SHR|SHL DR; SHR DR|DR,C←DR * 2; DR,C←DR / 2|
|JRC / JRNC|JRC ADR; JRNC ADR|C=1时跳转到ADR; C=0时跳转到ADR|
|JRZ / JRNZ|JRZ ADR/JRNZ ADR|Z=1时跳转到ADR；Z=0时跳转到ADR |
|JR / JMPA|JR ADR;JMPA ADR|Offset+PC→PC;    PC→AR,PC+1→PC;MEM→PC|
|IN / OUT|IN 80/81；OUT80/81|OUT: IRL→ARL; R0→(PORT)；  即R0→[I/O PORT]|
|PUSH / POP|PUSH DR;POP DR|POP: SP→AR,SP+1→SP;MEM→DR;即出栈→DR|
|PSHF / POPF|PSHF;POPF|POPF：出栈→FLAG|
|LDRR / STRR|LDRR DR,[SR];STRR [DR],SR|[SR]→DR；SR→[DR]|
|MVRD|MVRD DR,DATA|PC→AR,PC+1→PC;MEM→DR;  即DATA→DR|
|CALA|CALA ADR|PC→AR,PC+1→PC;(AR) →Q;SP-1→SP、AR;PC→MEM,Q→PC|
|RET|RET|SP→AR,SP+1→SP;MEM→PC;  即子程序返回|

---
